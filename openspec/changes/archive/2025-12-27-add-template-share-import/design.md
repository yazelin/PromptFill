## Context

PromptFill 是一個範本填充工具，使用者可以編輯範本並選擇變數值。目前缺少分享功能讓使用者可以將編輯中的範本分享給他人。

### 約束條件
- 必須能在純前端環境運作（無後端）
- 分享 URL 需要簡潔但完整包含範本資訊
- 接收者可以預覽但不會自動覆蓋本地資料

## Goals / Non-Goals

### Goals
- 提供一鍵分享範本的功能
- 分享連結可直接預覽範本內容
- 接收者可選擇是否匯入

### Non-Goals
- 不提供雲端儲存功能
- 不提供範本版本控制
- 不提供即時協作編輯

## Decisions

### 決定 1：使用 URL Hash Fragment 編碼範本資料

**原因**：
- Hash fragment 不會發送到伺服器，保護使用者隱私
- 可以包含較長的資料而不受 URL 長度限制影響
- 頁面載入時可透過 `window.location.hash` 輕鬆讀取

**替代方案**：
- Query string：會發送到伺服器，可能被記錄
- 短網址服務：需要後端支援
- 剪貼簿直接複製 JSON：不夠直覺

### 決定 2：使用 Base64 編碼範本內容

**原因**：
- 範本內容可能包含特殊字元，Base64 可安全編碼
- 使用 `btoa(encodeURIComponent())` 處理 Unicode

**格式**：
```
#{baseURL}#template={base64編碼的範本JSON}&var1=value1&var2=value2
```

### 決定 3：分享模式與匯入模式分離

**原因**：
- 避免意外覆蓋使用者本地資料
- 提供預覽機會讓使用者確認內容
- 明確的匯入動作讓使用者有控制權

## Risks / Trade-offs

### 風險 1：URL 過長
**風險**：複雜範本可能產生過長的 URL
**緩解**：
- 使用壓縮算法（如 LZ-String）
- 提示使用者 URL 過長時可能無法分享

### 風險 2：舊版瀏覽器相容性
**風險**：某些舊瀏覽器可能不支援 `navigator.clipboard`
**緩解**：提供 fallback 使用 `document.execCommand('copy')`

## Migration Plan

無需遷移，純新增功能。

## Open Questions

~~1. 是否需要限制範本大小以避免 URL 過長？~~ **已確認：不限制**
~~2. 分享連結是否需要加入過期時間？~~ **已確認：不需要，永久有效**

### 備註
- 使用者可透過「複製範本」按鈕取得目前範本
- 也可透過單一範本匯出功能取得完整 JSON
